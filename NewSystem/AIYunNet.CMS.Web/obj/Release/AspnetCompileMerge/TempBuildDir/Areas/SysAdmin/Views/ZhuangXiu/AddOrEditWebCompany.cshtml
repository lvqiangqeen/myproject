@using AIYunNet.CMS.Domain.Model
@model AIYunNet.CMS.Domain.Model.WebCompany
@using AIYunNet.CMS.BLL.Service
@using AIYunNet.CMS.BLL.IService
@using AIYunNet.CMS.Common.Utility
@{
    ViewBag.Title = "WebCompanyList";
    Layout = "~/Areas/SysAdmin/Views/Shared/_SysAdminLayout.cshtml";
    List<WebCase> webCaseList = ViewBag.WebCases as List<WebCase>;
    IWebPeople peopleService = new WebPeopleService();
    //logo信息
    ViewBag.FileElementName = "CompanyImage";
    ViewBag.FileValue = Model != null ? Model.CompanyImage : string.Empty;
    ViewBag.thumbnailImage = Model != null ? Model.thumbnailImage : string.Empty;
    ViewBag.width = "170px";
    ViewBag.height = "170px";

    List<WebRecommend> RecommendList = ViewBag.RecommendList as List<WebRecommend>;

    //擅长列表
    IWebCommon webCommonService = new WebCommonService();
    List<WebLookup> GoodList = webCommonService.GetLookupList("People_good_at_style");

}
@section Styles{
<link href="~/Content/Plugins/wangEditor/css/wangEditor.css" rel="stylesheet" />
<link href="~/Content/Plugins/datepicker/datepicker3.css" rel="stylesheet" />
    <style>
        .checkbox label, .radio label {
    padding-left: 10px;

}
    </style>
}
<div class="box">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#companyInfoTab" data-toggle="tab">基本信息</a></li>
        <li><a href="#companyCaseTab" data-toggle="tab">设计案例</a></li>
        <li><a href="#companyPeopleTab" data-toggle="tab">设计团队</a></li>
        <li><a href="#companylicence" data-toggle="tab">企业证书</a></li>
        <li><a href="#companyregist" data-toggle="tab">注册信息</a></li>
        <li><a href="#WebRecommendTab" data-toggle="tab">公司首页推送</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane fade in active" id="companyInfoTab">
            <div class="panel-body">
                @using (Ajax.BeginForm("AddOrEditWebCompany", new AjaxOptions { HttpMethod = "Post", OnSuccess = "afterAddOrEditWebCompany" }))
                {
                    <div class="row">
                        <div class="form-horizontal">
                            <div class="form-group" style="display:none">
                                @Html.HiddenFor(m => m.CompanyID, new { id = "hidCompanyID" })
                            </div>
                           
                            <div class="form-group">
                                <label for="CompanyName" class="col-sm-2 control-label">公司名称：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.CompanyName, new { @class = "form-control" })
                                </div>
                            </div>
                            @*地区*@
                            <div class="form-group">
                                <label for="city" class="col-sm-2 control-label">城市：</label>
                                <div class="col-sm-3">
                                    @Html.DropDownListFor(m => m.ProvinceID, new SelectList(ViewBag.provinceList, "Value", "Text"), new { @class = "form-control", id = "ProvinceID" })
                                </div>
                                <input type="hidden" value="@Model.ProvinceName" name="ProvinceName"/>
                                <div class="col-sm-3">
                                    <select name="CityID" class="form-control" id="cityid"></select>
                                </div>
                                <input type="hidden" value="@Model.CityName" name="CityName" />
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">服务区域：</label>
                                <div class="col-sm-offset col-sm-9" id="arealist">
                                </div>
                                <input name="AreasID" type="hidden" value="@Model.AreasID" />
                                <input name="AreasName" type="hidden" value="@Model.AreasName" />
                            </div>
                            <script>
                                $(function () {
                                    var provinceid = $("#ProvinceID").val();
                                    var ProvinceName=$("#ProvinceID").find("option:selected").text();

                                    getcitylist(provinceid);
                                    $("#ProvinceID").change(function () {
                                        provinceid = $("#ProvinceID").val();
                                        ProvinceName=$("#ProvinceID").find("option:selected").text();
                                        getcitylist(provinceid);
                                        $("input[name='ProvinceName']").val(ProvinceName);
                                        var CityName = $("#cityid  option:selected").text();
                                        var CityID=$("#cityid  option:selected").val();
                                        $("input[name='CityName']").val(CityName);
                                        getArealist(CityID)
                                    });
                                    $("#cityid").val("@Model.CityID");
                                    var cityid=$("#cityid  option:selected").val();
                                    getArealist(cityid);
                                    $("#cityid").change(function () {
                                        var CityName = $("#cityid  option:selected").text();
                                        var CityID=$("#cityid  option:selected").val();
                                        $("input[name='CityName']").val(CityName);
                                        getArealist(CityID)
                                    });


                                    var AreasIDlist="@Model.AreasID";
                                    if(AreasIDlist=="0")
                                    {
                                        $("#allarea").prop('checked',true);
                                        $("input:checkbox[name='areaidList']").prop('checked',true);
                                    }else
                                    {
                                        var AreaarrList=AreasIDlist.split(',');
                                        for(var i=0;i<AreaarrList.length;i++)
                                        {
                                            if(AreaarrList[i]!="")
                                                $("#areaid"+AreaarrList[i]).prop('checked',true);
                                        }
                                    }
                                    selectAllarea();





                                    //获取地区
                                    $("#companyInfobutton").click(function(){
                                        var AreasID = "";
                                        var AreasName="";
                                        if($('#allarea').is(':checked'))
                                        {
                                            AreasID="0";
                                            AreasName="全城";
                                        }else
                                        {
                                            $("input:checkbox[name='areaidList']:checked").each(function() {
                                                AreasID += $(this).val() + ",";
                                                AreasName+=$(this).next("input").val()+","
                                            });
                                        }
                                        $("input[name='AreasID']").val(AreasID);
                                        $("input[name='AreasName']").val(AreasName);
                                    });

                                    function getArealist(cityid)
                                    {
                                        $.ajax({
                                            async: false,
                                            type: "post",
                                            url: "/SysAdmin/city/GetAreasListByfather",
                                            data: {
                                                father: cityid
                                            },
                                            success: function (data) {
                                                if (data != null) {
                                                    var html = '';
                                                    html='<div class="checkbox col-sm-1">'
                                                        +'<label class="checkbox-custom">'
                                                        +'<input id="allarea" type="checkbox" value="" />全城'
                                                         +'</label></div>';
                                                    $.each(data.list, function (i,item) {
                                                        html += '<div class="checkbox col-sm-1">'
                                                            +'<label class="checkbox-custom">'
                                                            +'<input name="areaidList" id="areaid'+item.areaID+'" type="checkbox" value="'+item.areaID+'" />'
                                                            +'<input type="hidden" name="areanameList" value="'+item.area+'" />'
                                                            +item.area
                                                            +'</label>'
                                                            +'</div>';
                                                    });
                                                    $("#arealist").empty();
                                                    $("#arealist").append(html);
                                                    selectAllarea();
                                                }
                                                else {

                                                }
                                            },
                                            error: function (xhr, type) {
                                                alert('Ajax error!2');
                                            }
                                        });
                                    };

                                    function getcitylist(provinceid)
                                    {
                                        $.ajax({
                                            async: false,
                                            type: "post",
                                            url: "/SysAdmin/city/GetCityListByfather",
                                            data: {
                                                father: provinceid
                                            },
                                            success: function (data) {
                                                if (data != null) {
                                                    var html = '';
                                                    $.each(data.list, function (i,item) {
                                                        html += '<option value="' + item.cityID + '">' + item.city + '</option>'
                                                    });
                                                    $("#cityid").empty();
                                                    $("#cityid").append(html);

                                                }
                                                else {

                                                }
                                            },
                                            error: function (xhr, type) {
                                                alert('Ajax error!2');
                                            }
                                        });
                                    }
                                    function selectAllarea()
                                    {
                                        $("#allarea").click(function(){
                                            if($('#allarea').is(':checked')) {
                                                // do something
                                                $("input:checkbox[name='areaidList']").prop('checked',true);
                                            }else{$("input:checkbox[name='areaidList']").prop('checked',false);}
                                        });
                                    }

                                })
                            </script>
                            <div class="form-group">
                                <label for="CompanyPeople" class="col-sm-2 control-label">联系人：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.CompanyPeople, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="CompanyPeople" class="col-sm-2 control-label">公司电话：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.CompanyPhone, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="CompanyAddress" class="col-sm-2 control-label">公司地址：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.CompanyAddress, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="CompanyNet" class="col-sm-2 control-label">公司网址：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.CompanyNet, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="BelongArea" class="col-sm-2 control-label">所属区域：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.BelongArea, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="CompanySize" class="col-sm-2 control-label">公司规模：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.CompanySize, new { @class = "form-control" })
                                </div>
                            </div>
                            @Html.Partial("~/Areas/SysAdmin/Views/Shared/_UploadFile.cshtml")

                            <div class="form-group">
                                <label for="InBuildingCount" class="col-sm-2 control-label">在建案例：</label>
                                <div class="col-sm-3">
                                    @Html.TextBoxFor(m => m.InBuildingCount, new { @class = "form-control" })
                                </div>
                                <label for="ShowOrder" class="col-sm-2 control-label">显示顺序：</label>
                                <div class="col-sm-4">
                                    @Html.TextBoxFor(m => m.ShowOrder, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">擅长类型：</label>
                                <div class="col-sm-offset col-sm-9">
                                @foreach (WebLookup arr in GoodList)
                                {
                                    <div class="checkbox col-sm-1">
                                        <label class="checkbox-custom">
                                            @{string thisGoodAtStyleid = "GoodAtStyle" + arr.Code;}
                                            <input id="@thisGoodAtStyleid" name="GoodAtStyleIDList" type="checkbox" value="@arr.Code"/>
                                            <input type="hidden" name="GoodAtStyleList" value="@arr.Description"/>
                                            @arr.Description
                                        </label>
                                    </div>
                                }
                                </div>
                                <input name="GoodAtStyleID" type="hidden" value="@Model.GoodAtStyleID"/>
                                <input name="GoodAtStyle" type="hidden" value="@Model.GoodAtStyle"/>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">设置：</label>
                                <div class="col-sm-offset col-sm-9">
                                    <div class="checkbox col-sm-1">
                                        <label class="checkbox-custom">
                                            @Html.CheckBoxFor(m => m.IsApproved)
                                            审核
                                        </label>
                                    </div>
                                    <div class="checkbox col-sm-1">
                                        <label class="checkbox-custom">
                                            @Html.CheckBoxFor(m => m.IsTop)
                                            置首
                                        </label>
                                    </div>
                                    <div class="checkbox col-sm-1">
                                        <label class="checkbox-custom">
                                            @Html.CheckBoxFor(m => m.IsAuthentication)
                                            认证
                                        </label>
                                    </div>
                                    <div class="checkbox col-sm-2">
                                        <label class="checkbox-custom">
                                            @Html.CheckBoxFor(m => m.IsBond)
                                            缴纳保证金
                                        </label>
                                    </div>
                                    <div class="checkbox col-sm-2">
                                        <label class="checkbox-custom">
                                            @Html.CheckBoxFor(m => m.IsPreferentialActivity)
                                            参加优惠活动
                                        </label>
                                    </div>
                                    <div class="checkbox col-sm-1">
                                        <label class="checkbox-custom">
                                            @Html.CheckBoxFor(m => m.IsFamousEnterprise)
                                            名企
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="CompanyInfo" class="col-sm-2 control-label">公司简介：</label>
                                <div class="col-sm-9">
                                    @Html.TextAreaFor(m => m.CompanyInfo, new { @class = "col-md-12 form-control", @rows = "5", placeholder = "请输入描述" })
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-9" style="text-align:center">
                                    <button id="companyInfobutton" type="submit" class="btn btn-primary new_button_style">保存</button>
                                    <button type="reset" class="btn btn-default new_button_style">清空</button>
                                    <a href="#" class="btn btn-primary new_button_style" id="Returnback2">返回</a>
                                </div>
                            </div>

                        </div>
                    </div>
                    <script>
                        //获取修改擅长风格
                        $(function(){
                            var GoodAtStyleIdList="@Model.GoodAtStyleID";
                            var arrList=GoodAtStyleIdList.split(',');
                            for(var i=0;i<arrList.length;i++)
                            {
                                if(arrList[i]!="")
                                $("#GoodAtStyle"+arrList[i]).prop('checked',true);
                            }
                            

                            $("#companyInfobutton").click(function(){
                                var GoodAtStyleID = "";
                                var GoodAtStyle="";
                                $("input:checkbox[name='GoodAtStyleIDList']:checked").each(function() {
                                    GoodAtStyleID += $(this).val() + ",";
                                    GoodAtStyle+=$(this).next("input").val()+","
                                });
                                $("input[name='GoodAtStyleID']").val(GoodAtStyleID);
                                $("input[name='GoodAtStyle']").val(GoodAtStyle);
                            });



                        })
                    </script>
                }
            </div>
        </div>

        <div class="tab-pane fade" id="companyCaseTab">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <button class="btn btn-primary" onclick="forwardToAddWebCase()" style="width:120px;">添加案例</button>
                </h3>
            </div>
            <div class="panel-body">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>名称</th>
                            <th>所属人员</th>
                            <th>简介</th>
                            <th>操作 </th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (webCaseList != null)
                        {
                            foreach (WebCase webCase in webCaseList)
                            {
                                <tr>
                                    <td>@webCase.CaseTitle</td>
                                    @if (webCase.PeopleID == 0)
                                    {
                                        <td>未添加</td>
                                    }
                                    else
                                    {
                                        <td>@peopleService.GetWebPeopleByID(webCase.PeopleID).PeopleName</td>
                                    }
                                    <td>@webCase.CaseBrief</td>

                                        <td>

                                            <a class="btn1 btn-stroke" href="/SysAdmin/ZhuangXiu/AddOrEditWebCase?caseID=@webCase.CaseID&CompanyID=@Model.CompanyID"><i class="fa fa-pencil"></i></a>&nbsp;&nbsp;
                                            <a class="btn1 btn-stroke" href="javascript:deleteCase(@webCase.CaseID)"><i class="fa fa-trash-o"></i></a>
                                            @*<td><img src="@AppSettingsHelper.ImgUrl@webCase.CaseImageSmall" style="width:60px;height:60px;" /></td>*@
                                        </td>
                                    </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
            <div class="panel-footer">
                @*<h3 class="panel-title">
                        <button class="btn btn-primary" onclick="forwardToAddWebCase()" style="width:120px;">添加案例</button>
                    </h3>*@
            </div>
        </div>

        <div class="tab-pane" id="companyPeopleTab">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <button class="btn btn-primary" onclick="forwardToAddWebPeople()" style="width:120px;">添加团队成员</button>
                </h3>
            </div>
            <div class="panel-body">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>姓名</th>
                            <th>类别</th>
                            <th>电话</th>
                            <th>邮箱</th>
                            <th>级别</th>
                            <th>案例个数</th>
                            <th>工作年限</th>
                            <th>擅长风格</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (WebPeople people in ViewBag.CompanyPeoples as List<WebPeople>)
                        {
                            <tr>
                                <td>@people.PeopleName</td>
                                <td>@people.PeopleCategory</td>
                                <td>@people.PeoplePhone</td>
                                <td>@people.PeopleMail</td>
                                <td>@people.PeopleLevel</td>
                                <td>@people.CaseCount</td>
                                <td>@people.WorkYears</td>
                                <td>@people.GoodAtStyle</td>
                                <td>
                                    <a class="btn1 btn-stroke" href="/SysAdmin/ZhuangXiu/AddOrEditWebPeople?peopleID=@people.PeopleID&CompanyID=@people.CompanyID&PeopleCategory=设计师"><i class="fa fa-pencil"></i></a>&nbsp;&nbsp;
                                    <a class="btn1 btn-stroke" href="javascript:deletePeople(@people.PeopleID)"><i class="fa fa-trash-o"></i></a>
                                </td>
                            </tr>
                        }


                    </tbody>
                </table>
            </div>
            <div class="panel-footer">
                @*<h3 class="panel-title">
                        <button class="btn btn-primary" onclick="forwardToAddWebPeople()" style="width:120px;">添加设计师</button>
                    </h3>*@
            </div>
        </div>

        <div class="tab-pane fade" id="companylicence">
            <div class="panel-body">
                @using (Ajax.BeginForm("AddOrEditWebCompanyLicence", new AjaxOptions { HttpMethod = "Post", OnSuccess = "afterAddOrEditWebCompanyLicence" }))
                {
                    <div class="row">
                        <div class="form-horizontal">
                            <div class="form-group" style="display:none">
                                @Html.HiddenFor(m => m.CompanyID, new { id = "hidCompanyIDlicence" })
                            </div>
                            <div class="form-group">
                                <label for="CompanyLicence" class="col-sm-2 control-label">营业执照：</label>
                                <div class="col-sm-8">
                                    @Html.TextAreaFor(m => m.CompanyLicence, new { @class = "col-md-12 form-control", @rows = "5", id = "CompanyLicence", placeholder = "请输入描述", @style = "height:200px;max-height:500px;" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="Certification" class="col-sm-2 control-label">资质证书：</label>
                                <div class="col-sm-8">
                                    @Html.TextAreaFor(m => m.Certification, new { @class = "col-md-12 form-control", @rows = "5", id = "Certification", placeholder = "请输入描述", @style = "height:200px;max-height:500px;" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="Honor" class="col-sm-2 control-label">荣誉证书：</label>
                                <div class="col-sm-8">
                                    @Html.TextAreaFor(m => m.Honor, new { @class = "col-md-12 form-control", @rows = "5", id = "Honor", placeholder = "请输入描述", @style = "height:200px;max-height:500px;" })
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-9" style="text-align:center">
                                    <button type="submit" class="btn btn-primary new_button_style">保存</button>
                                    <button type="reset" class="btn btn-default new_button_style">清空</button>
                                    <a href="#" class="btn btn-primary new_button_style" id="Returnback1">返回</a>
                                </div>
                            </div>

                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="tab-pane fade" id="companyregist">
            <div class="panel-body">
                @using (Ajax.BeginForm("AddOrEditWebCompanyRegist", new AjaxOptions { HttpMethod = "Post", OnSuccess = "afterAddOrEditWebCompanyRegist" }))
                {
                    <div class="row">
                        <div class="form-horizontal">
                            <div class="form-group" style="display:none">
                                @Html.HiddenFor(m => m.CompanyID, new { id = "hidCompanyIDRegist" })
                            </div>

                            <div class="form-group">
                                <label for="CompanyType" class="col-sm-2 control-label">公司性质：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.CompanyType, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="RegistAddress" class="col-sm-2 control-label">注册地址：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.RegistAddress, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="RegistMoney" class="col-sm-2 control-label">注册资金：</label>
                                <div class="col-sm-3">
                                    @Html.TextBoxFor(m => m.RegistMoney, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="CompanyAddOn" class="col-sm-2 control-label">注册时间：</label>
                                <div class="col-sm-3">
                                    @Html.TextBoxFor(m => m.CompanyAddOn, new { @class = "form-control", id = "datetimepicker", placeholder = "请选择日期" })
                                    <span class="add-on"><i class="icon-th"></i></span>
                                </div>
                                 
                            </div>
                            <div class="form-group">
                                <label for="RegistAuthority" class="col-sm-2 control-label">登记机关：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.RegistAuthority, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="BusinessScope" class="col-sm-2 control-label">经营范围：</label>
                                <div class="col-sm-9">
                                    @Html.TextBoxFor(m => m.BusinessScope, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="RegistMark" class="col-sm-2 control-label">注册号：</label>
                                <div class="col-sm-4">
                                    @Html.TextBoxFor(m => m.RegistMark, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="RepresentPerson" class="col-sm-2 control-label">企业法人：</label>
                                <div class="col-sm-3">
                                    @Html.TextBoxFor(m => m.RepresentPerson, new { @class = "form-control" })
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-9" style="text-align:center">
                                    <button type="submit" class="btn btn-primary new_button_style">保存</button>
                                    <button type="reset" class="btn btn-default new_button_style">清空</button>
                                    <a href="#" class="btn btn-primary new_button_style" id="Returnback">返回</a>
                                </div>
                            </div>

                        </div>
                    </div>
                }
            </div>
        </div>


        <div class="tab-pane" id="WebRecommendTab">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <a class="btn btn-primary" href="/SysAdmin/Recommend/AddOrEditWebRecommend?WebRecommendID=0&RecommendType=12&CompanyID=@Model.CompanyID"><i class="fa fa-pencil"></i>添加推荐</a>
                </h3>
            </div>
            <div class="panel-body">
                <table id="webRecommendDt" class="table table-bordered table-striped dataTable" role="grid" aria-describedby="example1_info">
                    <thead>
                        <tr class="header-style" role="row">
                            <th class="text-center">
                                <input id="chkAll" type="checkbox">
                            </th>
                            <th>推送名称</th>
                            <th>推送简介</th>
                            <th>推送排序</th>
                            <th>微信推送链接</th>
                            <th>推送微信</th>
                            <th>推送首页</th>
                            <th>添加时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (RecommendList != null)
                        {
                            foreach (WebRecommend company in RecommendList)
                            {
                                <tr>
                                    <td><input class="chkCompany" type="checkbox" value="@company.RecommendId"></td>
                                    <td>@company.RecommendName</td>
                                    <td>@company.RecommendInfo</td>
                                    <td>@company.ShowOrder</td>
                                    <td>@company.RecWechartUrl</td>
                                    <td>
                                        @if (company.WechatOn)
                                        {
                                            @:<span style="color:red">是</span>
                                    }
                                        else
                                        {
                                            @:否
                                    }
                                    </td>
                                    <td>
                                        @if (company.PcOn)
                                        {
                                            @:<span style="color:red">是</span>
                                    }
                                        else
                                        {
                                            @:否
                                    }
                                    </td>
                                    <td>@company.AddOn</td>
                                    <td>
                                        <a class="btn1 btn-stroke" href="/SysAdmin/Recommend/AddOrEditWebRecommend?WebRecommendID=@company.RecommendId&RecommendType=12&CompanyID=@Model.CompanyID"><i class="fa fa-pencil"></i></a>&nbsp;&nbsp;
                                        <a class="btn1 btn-stroke" href="javascript:deleteRecommend(@company.RecommendId)"><i class="fa fa-trash-o"></i></a>
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
            <div class="panel-footer">
                @*<h3 class="panel-title">
                    <button class="btn btn-primary" onclick="forwardToAddWebPeople()" style="width:120px;">添加设计师</button>
                </h3>*@
            </div>
        </div>
    </div>
</div>
@section Scripts{
<script src="~/Content/Plugins/wangEditor/js/wangEditor.js"></script>
    <script>
        $(function () {
            var editor = new wangEditor('CompanyLicence');

            // 上传图片
            editor.config.uploadImgUrl = '/SysAdmin/FileUpload/UploadFileForEditor';

            // 配置自定义参数
            editor.config.uploadParams = {
                token: 'abcdefg',
                user: 'wangfupeng1988'
            };
            // 设置 headers
            editor.config.uploadHeaders = {
                'Accept': 'text/x-json'
            };
            // 普通的自定义菜单
            editor.config.menus = [
                //'source',
                //'|',     // '|' 是菜单组的分割线
                'img'
            ];
            editor.create();


            var editor1 = new wangEditor('Certification');

            // 上传图片
            editor1.config.uploadImgUrl = '/SysAdmin/FileUpload/UploadFileForEditor';

            // 配置自定义参数
            editor1.config.uploadParams = {
                token: 'abcdefg',
                user: 'wangfupeng1988'
            };
            // 设置 headers
            editor1.config.uploadHeaders = {
                'Accept': 'text/x-json'
            };
            // 普通的自定义菜单
            editor1.config.menus = [
                //'source',
                //'|',     // '|' 是菜单组的分割线
                'img'
            ];
            editor1.create();


            var editor2 = new wangEditor('Honor');

            // 上传图片
            editor2.config.uploadImgUrl = '/SysAdmin/FileUpload/UploadFileForEditor';

            // 配置自定义参数
            editor2.config.uploadParams = {
                token: 'abcdefg',
                user: 'wangfupeng1988'
            };
            // 设置 headers
            editor2.config.uploadHeaders = {
                'Accept': 'text/x-json'
            };
            // 普通的自定义菜单
            editor2.config.menus = [
                //'source',
                //'|',     // '|' 是菜单组的分割线
                'img'
            ];
            editor2.create();
        })
    </script>

<script src="~/Content/Plugins/datepicker/bootstrap-datepicker.js"></script>
<script src="~/Content/Plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>

    <script>
        function afterAddOrEditWebCompany(ret) {
            if (ret.retCode == 1) {
                swal({
                    title: "添加成功",
                    text: "是否继续添加公司信息？",
                    type: "success",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "是, 继续",
                    cancelButtonText: "不, 返回",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                function (isConfirm) {
                    if (isConfirm) {
                        window.location.href = window.location.href;
                    } else {
                        window.location.href = sessionStorage.getItem('url');
                    }
                });
            }

        }

        function forwardToAddWebCase() {
            window.location.href = "/SysAdmin/ZhuangXiu/AddOrEditWebCase?caseID=0&CompanyID="+@Model.CompanyID;
        }

        function forwardToAddWebPeople() {
            window.location.href = "/SysAdmin/ZhuangXiu/AddOrEditWebPeople?peopleID=0&CompanyID="+@Model.CompanyID+"&PeopleCategory=设计师";
        }
        function deleteCase(caseID) {

            swal({
                title: "你确定?",
                text: "你将删除这个记录!",
                type: "warning",
                showCancelButton: true,
                cancelButtonText: "不,取消",
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "是, 删除",
                closeOnConfirm: false
            },
    function () {
        $.ajax({
            type: "post",
            url: "/SysAdmin/ZhuangXiu/DeleteWebCase",
            data: { "caseID": caseID },
            success: function (data) {
                if (data.RetCode = 1) {
                    window.location.href = window.location.href;
                }
            }
        });
    });
        }

        function deletePeople(peopleID) {

            swal({
                title: "你确定?",
                text: "你将删除这个记录!",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "是, 删除!",
                cancelButtonText: "不，取消",
                closeOnConfirm: false
            },
    function () {
        $.ajax({
            type: "post",
            url: "/SysAdmin/ZhuangXiu/DeleteWebPeople",
            data: { "peopleID": peopleID },
            success: function (data) {
                if (data.RetCode = 1) {
                    window.location.href = window.location.href;
                }
            }

        });
    });
        }


        function afterAddOrEditWebCompanyLicence(ret) {
            if (ret.retCode == 1) {
                swal({
                    title: "添加成功",
                    text: "是否继续添加信息？",
                    type: "success",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "是, 继续",
                    cancelButtonText: "不, 返回",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                function (isConfirm) {
                    if (isConfirm) {
                        window.location.href = window.location.href;
                    } else {
                        window.location.href = sessionStorage.getItem('url');
                    }
                });
            }

        }


        function afterAddOrEditWebCompanyRegist(ret) {
            if (ret.retCode == 1) {
                swal({
                    title: "添加成功",
                    text: "是否继续添加信息？",
                    type: "success",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "是, 继续",
                    cancelButtonText: "不, 返回",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                function (isConfirm) {
                    if (isConfirm) {
                        window.location.href = window.location.href;
                    } else {
                        window.location.href = sessionStorage.getItem('url');
                    }
                });
            }

        }
        $(function () {
            $("#datetimepicker").datepicker({
                language: "zh-CN",
                autoclose: true,//选中之后自动隐藏日期选择框
                clearBtn: true,//清除按钮
                //todayBtn: true,//今日按钮
                todayHighlight: true,
                format: "yyyy-mm-dd"//日期格式
            });
        });
    </script>


<script>
    $("#Returnback").click(function () {
        window.location.href = sessionStorage.getItem('url');
    })
    $("#Returnback1").click(function () {
        window.location.href = sessionStorage.getItem('url');
    })
    $("#Returnback2").click(function () {
        window.location.href = sessionStorage.getItem('url');
    })
        $(function () {
            $("#webRecommendDt").DataTable({
                "language": {
                    "emptyTable": "<span style='color:#ef4136;'>没有数据<br></span>",
                    "info": "显示 _START_ 到 _END_ ，总共 _TOTAL_ 条记录",
                    "infoEmpty": "没有记录",
                    "infoFiltered": "",
                    "lengthMenu": "显示 _MENU_ 条记录",
                    "search": "搜索:",
                    "zeroRecords": "<span style='color:#ef4136;'>没有匹配记录</span>"
                },
                "paging": true,
                "lengthChange": true,
                "searching": true,
                "ordering": true,
                "info": true,
                "autoWidth": false,
                "order": [[7, "desc"]]
            });
        })

        function deleteRecommend(RecommendID) {

            swal({
                title: "你确定?",
                text: "你将删除这个记录!",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "是, 删除!",
                cancelButtonText: "不，取消",
                closeOnConfirm: false
            },
	function () {
	    $.ajax({
	        type: "post",
	        url: "/SysAdmin/Recommend/DeleteWebRecommend",
	        data: { "WebRecommendID": RecommendID },
	        success: function (data) {
	            if (data.RetCode = 1) {
	                window.location.href = window.location.href;
	            }
	        }

	    });
	});
        }
</script>
}