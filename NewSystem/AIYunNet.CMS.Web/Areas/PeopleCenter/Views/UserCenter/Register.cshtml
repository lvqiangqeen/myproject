
@{
    ViewBag.Title = "Register";
    Layout = "~/Areas/PeopleCenter/Views/Shared/_loginAndregister.cshtml";
}

<div class="login-body">
    <div class="loginbox">
        <div class="tit"><span>用户注册</span><a href="/PeopleCenter/UserCenter/LoginOn">已有账号？立即登陆</a></div>
        <div class="lg-error-ts" id="errorcode" style="display:none;"><i class="fa fa-times-circle"></i><span>验证码不正确</span></div>
        <div class="lg-error-ts" id="errorhave" style="display:none;"><i class="fa fa-times-circle"></i><span>该手机号已被注册</span></div>
        <div class="lg-error-ts" id="errornone" style="display:none;"><i class="fa fa-times-circle"></i><span>请输入用户名</span></div>
        <form id="login-form" action="https://account.vsochina.com/v2/login" method="post">
            <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-mobile-phone"></i></span>
                <input type="text" name="username" placeholder="请输入11位手机号" class="form-control">
            </div>
            @*<div class="input-group" style="width:181px">
                <span class="input-group-addon"><i class="fa fa-get-pocket"></i></span>
                <input type="text" name="codepassword" maxlength="20" placeholder="请输入右侧验证码" class="form-control" style="width:100px;">
                <span class="imgyzm"><img src="images/reg-yzm.jpg" /></span>
            </div>*@
            <div class="input-group" style="width:181px">
                <span class="input-group-addon"><i class="fa fa-get-pocket"></i></span>
                <input type="text" name="telpassword" maxlength="20" placeholder="请输入短信验证码" class="form-control" style="width:100px;">
                <span class="imgyzm"><a href="javascript:;">获取短信验证码</a></span>
            </div>
            <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span>
                <input type="password" name="password" placeholder="请设置密码" class="form-control">
            </div>
            <div class="checkbox-group">
                <a href="#" class="forget-pdw">忘记密码</a>
                <label class="icon-checkbox"><input type="checkbox" checked="checked" name="autolanding" value="1">同意 《美城街具版权声明》</label>
            </div>
            <div class="login-box-btn">
                <a href="javascript:;" class="btn-login">立即注册</a>
            </div>
        </form>
    </div>
</div>
<script>
    $("input[name=username]").focus(function () {
        $(".lg-error-ts").attr("style", "display:none;");
    });

    $("input[name=username]").blur(function () {
        var userAccount = $("input[name=username]").val();
        if (userAccount == "" || userAccount == null) {
            $("#errornone").attr("style", "");
        } else
        {
            $.ajax({
                async: false,
                type: "post",
                url: "/UserCenter/IsHaveTel",
                data: {

                    userAccount: userAccount

                },
                success: function (data) {
                    if (data == 0) {
                        $("#errorhave").attr("style", "");
                    }
                    else {
                        
                    }
                },
                error: function (xhr, type) {
                    alert('Ajax error!2');
                }
            });
        }
    });


    $(".btn-login").click(function ()
    {
        var userAccount = $("input[name=username]").val();
        var userPassword = $("input[name=password]").val();
        $.ajax({
            async: false,
            type: "post",
            url: "/PeopleCenter/UserCenter/Register",
            data: {

                userAccount: userAccount,
                userPassword: userPassword
                
            },
            success: function (data) {
                if (data == 1) {
                    alert("注册成功请登录！")
                    window.location.href = "/PeopleCenter/UserCenter/LoginOn";
                }
                else {
                    $("#erroruser").attr("style", "");
                }
            },
            error: function (xhr, type) {
                alert('Ajax error!2');
            }
        });
    });
</script>
